{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import { galleryLightbox } from '../main';\n\nexport function renderPics(pictures) {\n  const galleryEl = document.querySelector('.gallery');\n  const markup = pictures.hits\n    .map(pic => {\n      return `\n        <li class=\"photo-card\">\n          <a href=\"${pic.largeImageURL}\">\n            <img \n              src=\"${pic.webformatURL}\" \n              alt=\"${pic.tags}\" \n              loading=\"lazy\" \n              class=\"photo-card-img\"\n            />\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b> ${pic.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b> ${pic.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b> ${pic.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b> ${pic.downloads}\n            </p>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  galleryLightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport axios from 'axios';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderPics } from './render-functions';\n\nconst API_KEY = '33649719-b7fecbfe979c6e7e0b54f5aa7';\nconst PER_PAGE = 15;\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nexport async function fetchPics(newQuery) {\n  const galleryEl = document.querySelector('.gallery');\n  const loaderEl = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('.load-more');\n  const inputEl = document.getElementById('searchQuery');\n\n  if (newQuery !== undefined) {\n    query = newQuery.trim();\n    page = 1;\n    galleryEl.innerHTML = '';\n  }\n\n  loadMoreBtn.style.display = 'none';\n  loaderEl.style.display = 'block';\n  inputEl.value = '';\n\n  try {\n    const response = await axios.get('https://pixabay.com/api/', {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n      },\n    });\n\n    const data = response.data;\n    totalHits = data.totalHits;\n\n    if (!data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    renderPics(data);\n\n    if (page > 1) {\n      const { height: cardHeight } = document\n        .querySelector('.gallery li')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (page * PER_PAGE < totalHits) {\n      loadMoreBtn.style.display = 'block';\n    } else {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    page += 1;\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n    });\n    console.error(error);\n  } finally {\n    loaderEl.style.display = 'none';\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchPics } from './js/pixabay-api';\n\nconst formEl = document.getElementById('search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nexport const galleryLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nformEl.addEventListener('submit', e => {\n  e.preventDefault();\n  const { value } = e.currentTarget.elements.searchQuery;\n  fetchPics(value);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  fetchPics();\n});\n"],"names":["renderPics","pictures","galleryEl","markup","pic","galleryLightbox","API_KEY","PER_PAGE","page","query","totalHits","fetchPics","newQuery","loaderEl","loadMoreBtn","inputEl","data","axios","iziToast","cardHeight","error","formEl","SimpleLightbox","e","value"],"mappings":"+vBAEO,SAASA,EAAWC,EAAU,CACnC,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAASF,EAAS,KACrB,IAAIG,GACI;AAAA;AAAA,qBAEQA,EAAI,aAAa;AAAA;AAAA,qBAEjBA,EAAI,YAAY;AAAA,qBAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAOAA,EAAI,KAAK;AAAA;AAAA;AAAA,6BAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,gCAGNA,EAAI,QAAQ;AAAA;AAAA;AAAA,iCAGXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,OAKzC,EACA,KAAK,EAAE,EAEVF,EAAU,mBAAmB,YAAaC,CAAM,EAChDE,EAAgB,QAAO,CACzB,CChCA,MAAMC,EAAU,qCACVC,EAAW,GACjB,IAAIC,EAAO,EACPC,EAAQ,GACRC,EAAY,EAET,eAAeC,EAAUC,EAAU,CACxC,MAAMV,EAAY,SAAS,cAAc,UAAU,EAC7CW,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAU,SAAS,eAAe,aAAa,EAEjDH,IAAa,SACfH,EAAQG,EAAS,OACjBJ,EAAO,EACPN,EAAU,UAAY,IAGxBY,EAAY,MAAM,QAAU,OAC5BD,EAAS,MAAM,QAAU,QACzBE,EAAQ,MAAQ,GAEhB,GAAI,CAaF,MAAMC,GAZW,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKX,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAD,EACA,SAAUD,CACX,CACP,CAAK,GAEqB,KAGtB,GAFAG,EAAYM,EAAK,UAEb,CAACA,EAAK,KAAK,OAAQ,CACrBE,EAAS,MAAM,CACb,QACE,0EACV,CAAO,EACD,MACD,CAID,GAFAlB,EAAWgB,CAAI,EAEXR,EAAO,EAAG,CACZ,KAAM,CAAE,OAAQW,CAAU,EAAK,SAC5B,cAAc,aAAa,EAC3B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CAEGX,EAAOD,EAAWG,EACpBI,EAAY,MAAM,QAAU,QAE5BI,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EAGHV,GAAQ,CACT,OAAQY,EAAO,CACdF,EAAS,MAAM,CACb,QAASE,EAAM,OACrB,CAAK,EACD,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRP,EAAS,MAAM,QAAU,MAC1B,CACH,CC5EA,MAAMQ,EAAS,SAAS,eAAe,aAAa,EAC9CP,EAAc,SAAS,cAAc,YAAY,EAE1CT,EAAkB,IAAIiB,EAAe,aAAc,CAC9D,aAAc,MACd,aAAc,KAChB,CAAC,EAEDD,EAAO,iBAAiB,SAAUE,GAAK,CACrCA,EAAE,eAAc,EAChB,KAAM,CAAE,MAAAC,CAAK,EAAKD,EAAE,cAAc,SAAS,YAC3CZ,EAAUa,CAAK,CACjB,CAAC,EAEDV,EAAY,iBAAiB,QAAS,IAAM,CAC1CH,GACF,CAAC"}