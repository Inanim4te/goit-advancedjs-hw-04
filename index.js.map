{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '33649719-b7fecbfe979c6e7e0b54f5aa7';\nexport const PER_PAGE = 15;\n\nexport async function fetchPics(query, page) {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: PER_PAGE,\n    },\n  });\n\n  return response.data;\n}\n","import { galleryLightbox } from '../main';\n\nexport function renderPics(pictures) {\n  const galleryEl = document.querySelector('.gallery');\n  const markup = pictures.hits\n    .map(pic => {\n      return `\n        <li class=\"photo-card\">\n          <a href=\"${pic.largeImageURL}\">\n            <img \n              src=\"${pic.webformatURL}\" \n              alt=\"${pic.tags}\" \n              loading=\"lazy\" \n              class=\"photo-card-img\"\n            />\n          </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b> ${pic.likes}\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b> ${pic.views}\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b> ${pic.comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b> ${pic.downloads}\n            </p>\n          </div>\n        </li>\n      `;\n    })\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n  galleryLightbox.refresh();\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchPics, PER_PAGE } from './js/pixabay-api';\nimport { renderPics } from './js/render-functions';\n\nconst formEl = document.getElementById('search-form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst inputEl = document.getElementById('searchQuery');\n\nexport const galleryLightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: '250',\n});\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  query = inputEl.value.trim();\n  if (!query) {\n    iziToast.error({ message: 'Please enter a search query' });\n    inputEl.value = '';\n    return;\n  }\n  inputEl.value = '';\n  page = 1;\n  galleryEl.innerHTML = '';\n  await loadPictures();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  await loadPictures();\n});\n\nasync function loadPictures() {\n  loadMoreBtn.style.display = 'none';\n  loaderEl.style.display = 'block';\n\n  try {\n    const data = await fetchPics(query, page);\n    totalHits = data.totalHits;\n\n    if (!data.hits.length) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return;\n    }\n\n    renderPics(data);\n\n    if (page > 1) {\n      const { height: cardHeight } = document\n        .querySelector('.gallery li')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    if (page * PER_PAGE < totalHits) {\n      loadMoreBtn.style.display = 'block';\n    } else if (totalHits !== 0) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    page += 1;\n  } catch (error) {\n    iziToast.error({ message: error.message });\n    console.error(error);\n  } finally {\n    loaderEl.style.display = 'none';\n  }\n}\n"],"names":["API_KEY","PER_PAGE","fetchPics","query","page","axios","renderPics","pictures","galleryEl","markup","pic","galleryLightbox","formEl","loadMoreBtn","loaderEl","inputEl","SimpleLightbox","totalHits","e","iziToast","loadPictures","data","cardHeight","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCACHC,EAAW,GAEjB,eAAeC,EAAUC,EAAOC,EAAM,CAa3C,OAZiB,MAAMC,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUH,CACX,CACL,CAAG,GAEe,IAClB,CCjBO,SAASK,EAAWC,EAAU,CACnC,MAAMC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAASF,EAAS,KACrB,IAAIG,GACI;AAAA;AAAA,qBAEQA,EAAI,aAAa;AAAA;AAAA,qBAEjBA,EAAI,YAAY;AAAA,qBAChBA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAOAA,EAAI,KAAK;AAAA;AAAA;AAAA,6BAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,gCAGNA,EAAI,QAAQ;AAAA;AAAA;AAAA,iCAGXA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,OAKzC,EACA,KAAK,EAAE,EAEVF,EAAU,mBAAmB,YAAaC,CAAM,EAChDE,EAAgB,QAAO,CACzB,CC9BA,MAAMC,EAAS,SAAS,eAAe,aAAa,EAC9CC,EAAc,SAAS,cAAc,YAAY,EACjDL,EAAY,SAAS,cAAc,UAAU,EAC7CM,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAU,SAAS,eAAe,aAAa,EAExCJ,EAAkB,IAAIK,EAAe,aAAc,CAC9D,aAAc,MACd,aAAc,KAChB,CAAC,EAED,IAAIZ,EAAO,EACPD,EAAQ,GACRc,EAAY,EAEhBL,EAAO,iBAAiB,SAAU,MAAMM,GAAK,CAI3C,GAHAA,EAAE,eAAc,EAEhBf,EAAQY,EAAQ,MAAM,OAClB,CAACZ,EAAO,CACVgB,EAAS,MAAM,CAAE,QAAS,6BAA+B,CAAA,EACzDJ,EAAQ,MAAQ,GAChB,MACD,CACDA,EAAQ,MAAQ,GAChBX,EAAO,EACPI,EAAU,UAAY,GACtB,MAAMY,EAAY,CACpB,CAAC,EAEDP,EAAY,iBAAiB,QAAS,SAAY,CAChD,MAAMO,EAAY,CACpB,CAAC,EAED,eAAeA,GAAe,CAC5BP,EAAY,MAAM,QAAU,OAC5BC,EAAS,MAAM,QAAU,QAEzB,GAAI,CACF,MAAMO,EAAO,MAAMnB,EAAUC,EAAOC,CAAI,EAGxC,GAFAa,EAAYI,EAAK,UAEb,CAACA,EAAK,KAAK,OAAQ,CACrBF,EAAS,MAAM,CACb,QACE,0EACV,CAAO,EACD,MACD,CAID,GAFAb,EAAWe,CAAI,EAEXjB,EAAO,EAAG,CACZ,KAAM,CAAE,OAAQkB,CAAU,EAAK,SAC5B,cAAc,aAAa,EAC3B,wBACH,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CAEGlB,EAAOH,EAAWgB,EACpBJ,EAAY,MAAM,QAAU,QACnBI,IAAc,GACvBE,EAAS,KAAK,CACZ,QAAS,4DACjB,CAAO,EAGHf,GAAQ,CACT,OAAQmB,EAAO,CACdJ,EAAS,MAAM,CAAE,QAASI,EAAM,OAAS,CAAA,EACzC,QAAQ,MAAMA,CAAK,CACvB,QAAY,CACRT,EAAS,MAAM,QAAU,MAC1B,CACH"}